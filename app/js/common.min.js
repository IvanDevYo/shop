$(function(){var c,a=1;function t(e){var d,a,l,s;d=!0,$("input[data-limit]").each(function(){var e=$(this),a=parseFloat(f(e.val())),t=e.attr("name"),i=e.data("name"),l=parseFloat(e.data("limit"));if(0<t.indexOf("from")){var s=t.replace(/from/,"to"),r=$('input[name="'+s+'"]'),n=parseFloat(r.data("limit"));n=l<(o=parseFloat(f(r.val())))&&o<n?o:n,a<l&&(e.val(l),"price"==i&&$("#filter-slider").hasClass("ui-slider")&&(jQuery("#filter-slider").slider("values",[l,o]),d=!1)),n<a&&(e.val(n),"price"==i&&$("#filter-slider").hasClass("ui-slider")&&(jQuery("#filter-slider").slider("values",[n,o]),d=!1))}else{var o;s=t.replace(/to/,"from"),r=$('input[name="'+s+'"]'),n=parseFloat(r.data("limit")),n=(o=parseFloat(f(r.val())))<l&&n<o?o:n,l<a&&(e.val(l),"price"==i&&$("#filter-slider").hasClass("ui-slider")&&(jQuery("#filter-slider").slider("values",[o,l]),d=!1)),a<n&&(e.val(n),"price"==i&&$("#filter-slider").hasClass("ui-slider")&&(jQuery("#filter-slider").slider("values",[o,n]),d=!1))}}),d&&$("#filter-slider").hasClass("ui-slider")&&jQuery("#filter-slider").slider("values",[parseFloat(f(jQuery("input#minCost").val())),parseFloat(f(jQuery("input#maxCost").val()))]),msg=(a=$(".search-big"),l="",s="&",a.find("select").each(function(e){var a=$(this),t=a.find("option:selected"),i=1<t.length?"[]":"";t.each(function(){l=l+s+a.attr("name")+i+"="+this.value,s="&"})}),l=l+s+a.find('input[type="checkbox"]').serialize(),a.find('input.diapazon[type="text"]').each(function(){var e=$(this).data("name");l+=check_diapazon_params(a,s,e)}),l);var r=!!e&&e.offset(),t=$(".search-big").data("base"),i=$(".search-big").data("basefilter"),n=$(".search-big").data("topbase"),o=$(".search-big").data("topbasefilter"),u="";$(".search-big ul.acc li:not(.hid) a.active").each(function(){$(this).data("fieldname")&&(u=u+$(this).data("fieldname")+",")}),$('.search-big li[data-multiple="0"] a.opener.active').each(function(){$(this).data("fieldname")&&(u=u+$(this).data("fieldname")+",")}),$(".b-found").hide(),_(),xhr&&xhr.abort(),xhr=$.ajax({url:"/ajax/catalog.filter.php?mode=getNal&base_category_id="+t+"&base_filter="+i+"&top_base_category_id="+n+"&top_base_filter="+o+"&opened_enums="+u,data:msg,dataType:"json",cache:!1,success:function(e,a){if(r)var t=r.left-$(".b-found").width()-10;var i;for(t&&$(".b-found").css({top:r.top-10,left:t}).show(),0<e.object_total?($(".b-found .b-found__quantity-phrase").text("Найдено "+e.object_total),$(".b-found .b-found__amount").show(),$(".b-found .b-found__nothing").hide(),$(".found-num").removeClass("zero")):($(".b-found .b-found__amount").hide(),$(".b-found .b-found__nothing").show(),$(".found-num").addClass("zero")),$('.check[data-link^="?filter[brand]="]').addClass("filter_checkbox_disabled"),i=0;i<e.allowed_brands.length;++i)$('.check[data-link="?filter[brand]='+e.allowed_brands[i]+'"]').removeClass("filter_checkbox_disabled");for($('.check[data-link^="?filter[ser]="]').addClass("filter_checkbox_disabled"),i=0;i<e.allowed_series.length;++i)$('.check[data-link="?filter[ser]='+e.allowed_series[i]+'"]').removeClass("filter_checkbox_disabled");for($('.search-big li[data-multiple="0"] .drop:visible .check[data-enum], .search-big li[data-multiple="1"] .drop .check[data-enum]').addClass("filter_checkbox_disabled"),i=0;i<e.allowed_enums.length;++i)$('.check[data-enum="'+e.allowed_enums[i]+'"]').removeClass("filter_checkbox_disabled");$(".found-num").text("Найдено "+e.tovars),c=setTimeout(_,3e3)},error:function(e,a,t){}})}function f(e){return e=e.toString().replace(/\s+/g,"")}function _(){clearTimeout(c),$(".b-found").hide(),$(".b-filter-brands__series-btn-bubble").fadeOut(300)}$(".catalog__menu-item").mouseover(function(){var e=$(this).find(".hover_popup"),a=$(e).children(".catalog__menu-item_hover").length;4<=a?$(e).css("width","882px"):2<a?$(e).css("width","667px"):1<a&&$(e).css("width","452px"),$(e).css("display","flex")}),$(".catalog__menu-item").mouseleave(function(){$(".hover_popup").hide()}),$(".mobile__menu-link").click(function(e){e.preventDefault(),$(".top__nav-nav").toggleClass("opened")}),$(".filter__params-link").click(function(e){e.preventDefault(),$(this).next(".filter__params-open").toggleClass("vis")}),$(".owl-product").owlCarousel({items:1,dots:!1,URLhashListener:!0}),$(".owl-product-nav").owlCarousel({nav:!0,margin:8,dots:!1,responsive:{400:{items:4},320:{items:3}}}),$(".product__adder-link").click(function(e){if(e.preventDefault(),$(this).hasClass("plus"))a++;else{if(a<=1)return;a--}$(".product__adder-counter-text").find("span").text(a)}),$(".product__read__more-link").click(function(e){e.preventDefault(),$(".invis").each(function(){$(this).show()}),$(this).hide()}),$("#tab1").click(function(e){e.preventDefault();var a=$(this).parent(".tabs__link-item");$(".tabs__content-item").hide(),$(".tabs__link-item").removeClass("tabs__link_active"),$(a).addClass("tabs__link_active"),$("#tab__content1").show()}),$("#tab2").click(function(e){e.preventDefault();var a=$(this).parent(".tabs__link-item");$(".tabs__content-item").hide(),$(".tabs__link-item").removeClass("tabs__link_active"),$(a).addClass("tabs__link_active"),$("#tab__content2").show()}),$(document).on("load",function(){$(".scroll").mCustomScrollbar({axis:"y",scrollButtons:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},scrollInertia:800})}),0<$("input[data-limit]").length&&jQuery("#filter-slider").slider({min:jQuery("input#minCost").data("limit"),max:jQuery("input#maxCost").data("limit"),values:[parseFloat(f(jQuery("input#minCost").val())),parseFloat(f(jQuery("input#maxCost").val()))],step:100,range:!0,stop:function(e,a){jQuery("input#minCost").val(jQuery("#filter-slider").slider("values",0)),jQuery("input#maxCost").val(jQuery("#filter-slider").slider("values",1)),t($("#filter-slider"))},slide:function(e,a){jQuery("input#minCost").val(jQuery("#filter-slider").slider("values",0)),jQuery("input#maxCost").val(jQuery("#filter-slider").slider("values",1))}}),$(".price-range a").click(function(e){e.preventDefault();var a=$(this);return $("#minCost").val(a.data("min")),$("#maxCost").val(a.data("max")),jQuery("#filter-slider").slider("values",[a.data("min"),a.data("max")]),t(a),!1})});